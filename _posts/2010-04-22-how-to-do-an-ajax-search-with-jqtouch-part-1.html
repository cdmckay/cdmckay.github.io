---
layout: post
status: publish
published: true
title: How to do an AJAX search with jQTouch, Part 1
author:
  display_name: cdmckay
  login: cdmckay
  email: me@cdmckay.org
  url: ''
author_login: cdmckay
author_email: me@cdmckay.org
wordpress_id: 1371
wordpress_url: http://cdmckay.org/blog/?p=1371
date: '2010-04-22 01:22:35 +0200'
date_gmt: '2010-04-22 06:22:35 +0200'
categories:
- Web Development
- Programming
- PHP
- JavaScript
tags:
- jqtouch
- ajax
comments:
- id: 423
  author: Tweets that mention How to do an AJAX search with jQTouch, Part 1 &raquo;
    Cameron McKay -- Topsy.com
  author_email: ''
  author_url: http://topsy.com/trackback?utm_source=pingback&amp;utm_campaign=L1&amp;url=http://cdmckay.org/blog/2010/04/22/how-to-do-an-ajax-search-with-jqtouch-part-1/
  date: '2010-04-23 18:43:43 +0200'
  date_gmt: '2010-04-23 23:43:43 +0200'
  content: "[...] This post was mentioned on Twitter by Dion Almaer. Dion Almaer said:
    Cameron McKay has put up a jQTouch 101 tutorial on creating a search page using
    it. http://bit.ly/9S6QW1 [...]"
- id: 447
  author: iPhone User
  author_email: b708322@owlpic.com
  author_url: http://none
  date: '2010-05-11 04:55:22 +0200'
  date_gmt: '2010-05-11 09:55:22 +0200'
  content: |-
    I'm waiting of Part two! :-)
    Nice tutorial!
- id: 448
  author: DerTobi75
  author_email: tobi@dertobi75.de
  author_url: ''
  date: '2010-05-11 12:14:34 +0200'
  date_gmt: '2010-05-11 17:14:34 +0200'
  content: Will there be a part 2?
- id: 449
  author: cdmckay
  author_email: me@cdmckay.org
  author_url: ''
  date: '2010-05-11 14:55:36 +0200'
  date_gmt: '2010-05-11 19:55:36 +0200'
  content: There will be a Part 2 once I have some more free time :)
- id: 450
  author: Ali
  author_email: halawi.ali@gmail.com
  author_url: ''
  date: '2010-05-11 20:59:54 +0200'
  date_gmt: '2010-05-12 01:59:54 +0200'
  content: "Hello still waiting for the second part and very excited ! \nthank you
    in advance,\nAli"
- id: 452
  author: peter
  author_email: mrrichmond2003@yahoo.co.uk
  author_url: ''
  date: '2010-05-14 17:10:37 +0200'
  date_gmt: '2010-05-14 22:10:37 +0200'
  content: "Hi!\r\nI&rsquo;ve been trying the jQTouch but for the life of me I cannot
    get even the simplest thing to show on screen. \r\nI&rsquo;m on widows vista &ndash;
    I tried IE 8, Firefox, Safari and even the iphone (Posted my code to a web server)\r\nI
    have my index.html file in the same folder as the jqtouch folders . All I get
    is the title and a black page. When I view source &ndash; its in there. When I
    look at firebug, it seems its found all the references to the js and css file.\r\nPlease
    help\r\nThanks"
- id: 453
  author: cdmckay
  author_email: me@cdmckay.org
  author_url: ''
  date: '2010-05-14 17:13:52 +0200'
  date_gmt: '2010-05-14 22:13:52 +0200'
  content: |-
    @Peter:
    Did you try using the source that I attached at the end of article?
- id: 454
  author: peter
  author_email: mrrichmond2003@yahoo.co.uk
  author_url: ''
  date: '2010-05-14 18:40:48 +0200'
  date_gmt: '2010-05-14 23:40:48 +0200'
  content: "Hi!\r\nThanks for the reply. I was following top to bottom.. I think I
    understand WHY I was getting the \"error\". You have to actually have the divs
    in place. \r\nI now got a page up with titles.. :-) I'm moving on to trying to
    load server HTML / ajax. \r\n\r\nDo you have any suggestions on putting up charts?\r\nThanks
    -"
- id: 495
  author: Don
  author_email: donslice@gmail.com
  author_url: ''
  date: '2010-07-30 21:12:16 +0200'
  date_gmt: '2010-07-31 02:12:16 +0200'
  content: Will there be a part 2? I can't wait for it!
- id: 515
  author: Sumit
  author_email: sumitgrover10@gmail.com
  author_url: http://www.webburners.com
  date: '2010-08-22 08:57:57 +0200'
  date_gmt: '2010-08-22 13:57:57 +0200'
  content: Thanks for the lovely tutorial but its still very much incomplete ,Do you
    know how to send parameter while linking to various divs?? or if you want to post
    something how to do that??
- id: 590
  author: Ray
  author_email: pbeasley@gmail.com
  author_url: ''
  date: '2010-11-23 15:23:00 +0100'
  date_gmt: '2010-11-23 20:23:00 +0100'
  content: |-
    Great tutorial!

    Question: jquery 1.3.2 comes with jqtouch. Do I need to upgrade to 1.4.2 before this will work?

    I don't get undefined results as some of the previous posters. Instead, it doesn't display anything.

    Thanks in advance!
- id: 591
  author: cdmckay
  author_email: me@cdmckay.org
  author_url: ''
  date: '2010-12-05 23:42:54 +0100'
  date_gmt: '2010-12-06 04:42:54 +0100'
  content: |-
    @Ray:
    Did you try using the source in the zip file linked at the end of the article?
---
<p><a href="http://www.jqtouch.com/">jQTouch</a> is a pretty nifty little <a href="http://jquery.com">jQuery</a> plugin for making websites look like native iPhone apps.  Unfortunately, beyond a bunch of examples included with the distribution, there's not a whole lot of online documentation written for jQTouch.  Having started to use jQTouch for a professional project, I thought I'd help remedy this deficiency by posting what I learned along the way.</p>
<p>We'll start with something fairly straightforward by making a jQTouch app that makes an AJAX call to a PHP script to search a database.  It then displays the results of that search in the jQTouch app.  This article is split up into two parts.  The first part deals with the jQTouch UI and the second part deals with the PHP script and the supporting JavaScript.</p>
<p>This is part 1 <a href="http://cdmckay.org/blog/2010/07/31/how-to-do-an-ajax-search-with-jqtouch-part-2/">of a two part series</a>.</p>
<p><!--more--></p>
<h3>jQTouch UI</h3>
<p>Let's start with our jQTouch UI code.  First, <a href="http://jqtouch.googlecode.com/files/jqtouch-1.0-beta-2-r109.zip">we'll need to grab the jQTouch distribution</a>.  Use your favourite archiver to extract two folders: <code>jqtouch</code> and <code>themes</code> and put them in our document root.</p>
<p>Next, we need to create an index page, <code>index.html</code>, in our document root.  We'll need some boilerplate to get things started:</p>
<pre lang="html4strict" line="1">
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /&gt;
        &lt;meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;" /&gt;
        &lt;script type="text/javascript" src="http://www.google.com/jsapi"&gt;&lt;/script&gt;
        &lt;script type="text/javascript"&gt; google.load("jquery", "1.4.2"); &lt;/script&gt;
        &lt;script type="text/javascript" src="jqtouch/jqtouch.min.js" charset="utf-8"&gt;&lt;/script&gt;
        &lt;script type="text/javascript"&gt; $.jQTouch(); &lt;/script&gt;
        &lt;style type="text/css" media="screen"&gt;@import "jqtouch/jqtouch.min.css";&lt;/style&gt;
        &lt;style type="text/css" media="screen"&gt;@import "themes/jqt/theme.min.css";&lt;/style&gt;
        &lt;title&gt;Searcher&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
    &lt;/body&gt;
&lt;/html&gt;
</pre>
<p>Here's the breakdown: </p>
<ul>
<li>on line 5, we tell the iPhone not to allow zooming,</li>
<li>on lines 6-7, we load jQuery from the Google CDN,</li>
<li>on line 8, we load the jQTouch JavaScript source,</li>
<li>on line 9, we initialize jQTouch,</li>
<li>on lines 10-11, we load the jQTouch core stylesheet and the theme stylesheet.</li>
</ul>
<h3>The Home Page</h3>
<p>Now that we have the boilerplate setup, it's time to start adding some UI elements.  jQTouch makes this extremely simple by handling most of the heavy lifting (add this between the <code>body</code> tags):</p>
<pre lang="html4strict" line="1">
&lt;div id="home" class="current"&gt;
    &lt;div class="toolbar"&gt;
        &lt;h1&gt;Searcher&lt;/h1&gt;
    &lt;/div&gt;
    &lt;ul class="rounded"&gt;
        &lt;li class="arrow"&gt;&lt;a href="#search"&gt;Search&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
&lt;/div&gt;
</pre>
<p>Woah, that's a lot packed into these 8 lines.  Let's break it down:</p>
<ul>
<li>on line 1, we have a div with the id "home".  This is a special id for jQTouch that indicates the entry point (i.e. the first page shown).</li>
<li>on line 2-4, we have the toolbar.  This is something that is repeated for every jQTouch page.  It's the part that is shown at the top of any iPhone GUI app and, consequently, any jQTouch app.</li>
<li>on line 5-7, we have the content of this page.  Basically, we are telling jQTouch that we want a list of rounded buttons, one of which is "Search".  The <code>#search</code> href in the anchor tag tells jQTouch what page we want to load when that button is clicked.</li>
</ul>
<p>Before I move on, let's look at a screenshot of what we have so far: </p>
<p><a href="http://cdmckay.org/blog/wp-content/blogs.dir/2/files/2010/04/home.jpg"><img src="http://cdmckay.org/blog/wp-content/blogs.dir/2/files/2010/04/home.jpg" alt="" title="home" width="320" height="480" class="aligncenter size-full wp-image-1408" /></a></p>
<p>Not too shabby considering we've written all of 8 lines of HTML to make that happen!  Unfortunately, as you've probably noticed, clicking the Search button does nothing but make it turn green.</p>
<h3>The Search Page</h3>
<p>Let's hook up the Search button from the previous page to a search page.  This will be where we enter our search text.  Here's the code for the search page (it goes right after the code in the last listing):</p>
<pre lang="html4strict" line="1">
&lt;form id="search" action=""&gt;
    &lt;div class="toolbar"&gt;
        &lt;h1&gt;Search&lt;/h1&gt;
        &lt;a href="#" class="back"&gt;Back&lt;/a&gt;
    &lt;/div&gt;
    &lt;ul class="rounded"&gt;
        &lt;li&gt;&lt;input type="text" name="search-text" placeholder="Search" id="search-text" /&gt;&lt;/li&gt;
    &lt;/ul&gt;
    &lt;ul class="edgetoedge" id="search-results"&gt;
        &lt;li class="sep"&gt;Results&lt;/li&gt;                
    &lt;/ul&gt;
&lt;/form&gt;
</pre>
<ul>
<li>on line 1, we have the id "search".  This corresponds to the href we had in the link on the home page.</li>
<li>on lines 2-5, we have the toolbar again, this time for the search page.  Of particular note here is the addition of the back button.  A div with class "back" is another special case for jQTouch.  It will automatically be linked back to the previous page.</li>
<li>on lines 6-8, we have another familiar face, the unordered button list.  However, this time we have an input with a special name "search-text".  In jQTouch, any text input element that has a name that starts with "search" will act as a search input.</li>
<li>on lines 9-11, we have another unordered list of buttons, this time using a different visual class "edgetoedge".  In this list we have one item, a separator (class "sep"), that we use to label the list as our results.  Later on, in part 2, we'll place our search results in this list.</li>
</ul>
<p>After we add this code to our <code>index.html</code> file, let's reload the web page in our iPhone or iPad and try clicking the Search button again.  You'll see it brings you to a screen like this:</p>
<p><a href="http://cdmckay.org/blog/wp-content/blogs.dir/2/files/2010/04/search.jpg"><img src="http://cdmckay.org/blog/wp-content/blogs.dir/2/files/2010/04/search.jpg" alt="" title="search" width="320" height="480" class="aligncenter size-full wp-image-1409" /></a></p>
<p>You'll also notice that if you click the "Back" button at the top, it'll bring you back to the "home" page.</p>
<h3>Conclusion</h3>
<p>In this tutorial we made a jQTouch UI that looks like an iPhone app.  We touched on a few jQTouch concepts:</p>
<ul>
<li>Pages are linked together using ids.</li>
<li>All jQTouch pages have toolbars (which is a div with class "toolbar").  The toolbar contains an h1 element that represents the title of the page and two optional buttons, one of which can be a back button by using the class "back".
<li>Lists of buttons are created by using unordered lists ("ul" elements) with special classes like "rounded" and "edgetoedge".</li>
<li>Text input elements will act differently based on their name attributes.  For example, a search text input element is defined as such by having a "search" prefix in it's name attribute.</li>
</ul>
<p>However this is only scratching the surface of jQTouch.  If you want to learn more I highly recommend your check out the <code>demos</code> directory in the jQTouch distribution.  There is also <a href="http://code.google.com/p/jqtouch/">a Google Code page</a> that has a Wiki and links to other tutorials.</p>
<h3>What Now?</h3>
<p>With respect to the UI, we're done.  All that remains to be done now is to write a PHP script that we'll query with an jQuery AJAX call.  <a href="http://cdmckay.org/blog/2010/07/31/how-to-do-an-ajax-search-with-jqtouch-part-2/">This is covered in part 2 of this tutorial</a>.</p>
<h3>Source</h3>
<p>The source code I have written in this article is public domain, and you are free to do what you will with it.  Here is <a href="http://cdmckay.org/files/jqtouch-ajax-search.zip">a zip of the source, along with the required jQTouch source</a>.  It should work pretty much right out of the box.</p>
